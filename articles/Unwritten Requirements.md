Android Development Unwritten Requirements
------------------------------------------

During my career as android platform software developer at [Lemberg Solutions][1] we agreed to follow some rules which I want you to tell about.


----------


### Code Style
We are writing our code according to [Android Code Style Guidelines][2] and using [Android Code Style Rules Formatter][3] to auto-format code.

#### How to setup a formatter for your IDE?
There are pre-made formatter rules available from [github.com/android/platform_development][4] repository.

#### Android Studio / IntelliJ IDEA
Copy [AndroidStyle.xml][5] file to your config folder, example of it's location on my Windows 7 is below:

    C:\Users\Dmytro Danylyk\.IntelliJIdea12\config\codestyles 
    C:\Users\Dmytro Danylyk\.AndroidStudioPreview\config\codestyles
    
Startup your IntelliJ IDEA and turn on formatting:

    File - Settings - Code Style - Schema - AndroidStyle

**Note:** There is a bug in `AndroidStyle.xml` which adds blank lines to all your fields, to fix this, do the following. Open `AndroidStyle.xml` file, find this line:

    name="BLANK_LINES_AROUND_FIELD" value="1"

Replace it with this line:

    name="BLANK_LINES_AROUND_FIELD" value="0"
    
#### Eclipse

Download [android-formatting.xml][6] file, startup your Eclipse IDE and turn on formatting:

    Menu bar -> Window -> Preferences -> Java -> Code Style -> Formatter -> Import
    
### Annotations
We are using `@Nullable` and `@NotNull` [jetbrains][7] annotations library.

#### Why do we use it?

Two annotations - `@Nullable` and `@NotNull` - handle method invocations and field dereferences outside methods.

The `@NotNull` annotation is, actually, an explicit contrast declaring the following:

 - a method should not return null 
 - a variable (like fields, local variables, and parameters) cannot hold the null value

The `@Nullable` annotation reminds you about necessity to introduce a NPE check when:

 - calling methods that can return null 
 - dereferencing variables (fields, local variables, parameters) that can be null

IntelliJ IDEA warns you if these contracts are violated. More details [here][8].

### project.info file

For every project we create simple `project.info` text file and fill it with following information:

- few lines of description, what this project is all about
- line about *code style & formatter*, if you are using custom include it
- few lines about what libraries you are using
- line about *logger*, very commonly all projects have their own log wrapper class
- few lines about what *Patterns* you have used and where (especially *Singletons*)
- few lines about main parts of your application like *image loader, http client, database* etc.

#### How does this help?
When new developer is attached to the project or after few months of working on other project, you are back - `project.info` file helps to get familiar with whole project structure and dive into development very quickly

Below is a quick example of `project.info` file to show you basic idea.

        Project name: Stacy
        Description: Application is displaying weather using openweathermap.org API.

        All source code is formatted according to the Android Code Style Rules Formatter
        git clone https://github.com/android/platform_development/tree/master/ide

        Project uses jetbrains @NotNull and @Nullable annotations library - annotations.jar

        Project uses Volley library as http client - voley.jar
        git clone https://android.googlesource.com/platform/frameworks/volley

        Project uses wrapper for logger - com.ls.utils.L.java
        Note: 'd' and 'v' logs are NOT logged in release build.

        We used Singleton pattern to implement http request queue (see com.ls.model.http.HttpRequest.java)
        
### gitignore

It is very important to keep your project clean and [.gitignore][9] is your savior. We are using great service [gitignore.io][10] to generate ready `.gitignore` files.

Example of `.gitignore` file for android [gitignore.io/api/android][11]

    ### Android ###
    # built application files
    *.apk
    *.ap_
     
    # files for the dex VM
    *.dex
     
    # Java class files
    *.class
     
    # generated files
    bin/
    gen/
     
    # Local configuration file (sdk path, etc)
    local.properties
     
    # Eclipse project files
    .classpath
    .project
     
    # Proguard folder generated by Eclipse
    proguard/
     
    # Proguard folder generated by Intellij
    proguard_logs/
     
    # Intellij project files
    *.iml
    *.ipr
    *.iws
    .idea/

### libraries & frameworks
Keeping up to date with existing libraries and frameworks will show you much easier and faster way of moving forward. Here is our most-used list.

- many custom views you can find on [androidviews.net][12]
- great http client from google - [Volley][13]
- powerful image downloading and caching library - [Picasso][14]
- utilities that helps in design and development - [Android Asset Studio][15]
- the fastest android emulator for application testing and presentation - [Genymotion][16]


  [1]: http://lemberg.co.uk/
  [2]: http://source.android.com/source/code-style.html
  [3]: https://github.com/android/platform_development/tree/master/ide
  [4]: https://github.com/android/platform_development
  [5]: https://github.com/android/platform_development/blob/master/ide/intellij/codestyles/AndroidStyle.xml
  [6]: https://github.com/android/platform_development/blob/master/ide/eclipse/android-formatting.xml
  [7]: http://mvnrepository.com/artifact/com.intellij/annotations/9.0.4
  [8]: http://www.jetbrains.com/idea/documentation/howto.html
  [9]: http://git-scm.com/docs/gitignore
  [10]: http://gitignore.io/
  [11]: http://gitignore.io/api/android
  [12]: http://www.androidviews.net/
  [13]: https://android.googlesource.com/platform/frameworks/volley/
  [14]: http://square.github.io/picasso/
  [15]: http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html
  [16]: http://www.genymotion.com/
